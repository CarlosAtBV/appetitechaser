//===========================================================================
//
// Mel's Melee Style
// (Adapted from TSP0.1.2e, the unreleased TSPX, and TSP+1 by Ixcuazl)
//
// by Cardboard Marty
// Sprites by Cardboard, Blox, Scuba Steve, Banjo Entertainment
// 
//
//===========================================================================

ACTOR MelMeleeRetro : TSPMelBaseWeapon
{
	Inventory.PickupMessage "You relearned your fighting style you apparently dropped [Class: Melee, Slot 1]"
	Obituary "%o learned why %k is the king of the iron fist."
	Weapon.Kickback 100
	Weapon.BobStyle Alpha
	Weapon.BobSpeed 1.5
	Weapon.BobRangeY 1.0
	Weapon.BobRangeX 0.5
	Tag "$MelRetroMeleeTag"
	+WEAPON.WIMPY_WEAPON
	+WEAPON.MELEEWEAPON
	+WEAPON.NOALERT
	+WEAPON.NOAUTOAIM
	+WEAPON.NOAUTOFIRE
	+NOEXTREMEDEATH
	+INVENTORY.UNDROPPABLE
	+TSP_Weapon_Core.NoModSwitch
	States
	{
	Spawn:
		TNT1 A -1
		Loop
	Deselect:
		TNT1 A 0 A_TakeInventory("MeleeSelected", 1)
		TNT1 A 0 A_TakeInventory("MelPrimaryCombo", 99)
		TNT1 A 0 A_TakeInventory("MelAlternateCombo", 99)
		TNT1 A 0 A_TakeInventory("MelMachCombo", 99)
		TNT1 A 0 A_TakeInventory("MelPistolCombo", 99)
		TNT1 A 0 A_JumpIfInventory("ComboCoolDown", 1, "ComboDeselect")
		TNT1 A 0 A_TakeInventory("ComboCoolDown", 99)
		MLED ABCDE 1
		TNT1 A 3
	DeselectLoop:
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAA 0  A_Lower
		TNT1 A 1 A_Lower
		Loop
	ComboDeselect:
		TNT1 A 0 A_Lower
		Loop
	Select:
		TNT1 A 0 A_GiveInventory("MeleeSelected", 1)
		TNT1 A 0 A_WeaponOffset(0,32)
		TNT1 A 4
		MLEU ABCDE 1
		MLEG A 1 A_Raise
		Loop
	Ready:
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		MLEG A 1 A_WeaponReady
		Loop

// Punch!
	Fire:
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 0 A_JumpIfInventory("MelMachCombo",4,"AfterMelee") //made so you can't knifehand again after the Rapid Fire Finish
		TNT1 A 0 A_JumpIfInventory("MelMachCombo",3,"RapidFireFinish")			// K-K-P-P-P
		TNT1 A 0 A_JumpIfInventory("MelMachCombo",2,"CrossDuo")					// K-K-P-P-P
		TNT1 A 0 A_JumpIfInventory("MelMachCombo",1,"CrossPunch")				// K-K-P-P
		TNT1 A 0 A_JumpIfInventory("MelAlternateCombo",2,"KnifeHand")			// K-K-P
		TNT1 A 0 A_JumpIfInventory("MelPrimaryCombo",3,"ScorpionTailFinisher")	// P-P-P-P
		TNT1 A 0 A_JumpIfInventory("MelPrimaryCombo",2,"LeftOverhead")			// P-P-P
		TNT1 A 0 A_JumpIfInventory("MelPrimaryCombo",1,"RightHook")				// P-P

// P DEFAULT		
	Punch1:	
		TNT1 A 0 A_PlaySoundEX("basicmelee/miss", "SoundSlot5")
		ML1F ABCD 1
		ML1F D 0 A_JumpIfInventory("PowerStrength",1,"PunchPowered")
		ML1F E 1 A_TSP_Melee(20,70,"BasicMeleePuff")
		Goto PunchEnd
	PunchPowered:
		ML1F E 1 A_TSP_Melee(40,70,"BasicMeleePuff")
		Goto PunchEnd
		
// P END
	PunchEnd:
		TNT1 A 0 A_GiveInventory("MelPrimaryCombo", 1)
		TNT1 A 0 A_GiveInventory("ComboCoolDown", 1)
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		ML1F F 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		ML1F G 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		ML1F J 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		ML1F K 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		Goto AfterMelee
		
// DEFAULT P-P
	RightHook:
		TNT1 A 0 A_PlaySoundEX("basicmelee/miss", "SoundSlot5")
		ML2F ABC 1
		ML1F D 0 A_JumpIfInventory("PowerStrength",1,"RightHookPowered")
		ML2F D 1 A_TSP_Melee(24,70,"BasicMeleePuff")
		Goto RightHookEnd
	RightHookPowered:
		ML2F D 1 A_TSP_Melee(48,70,"BasicMeleePuff")
		Goto RightHookEnd

// P-P END
	RightHookEnd:
		ML2F E 1
		TNT1 A 0 A_GiveInventory("MelPrimaryCombo", 1)
		TNT1 A 0 A_GiveInventory("ComboCoolDown", 1)
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		ML2F H 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		Goto AfterMelee

//P-P-P
	LeftOverhead:
		TNT1 A 0 A_PlaySoundEX("basicmelee/miss", "SoundSlot5")
		TNT1 A 0 A_PlaySound("*smallmelee", CHAN_VOICE)
		ML3F ABC 1 
		ML1F D 0 A_JumpIfInventory("PowerStrength",1,"LeftOverheadPowered")
		ML3F E 1 A_TSP_Melee(24,70,"BasicMeleePuff")
		Goto LeftOverheadEnd
	LeftOverheadPowered:
		ML3F E 1 A_TSP_Melee(48,70,"BasicMeleePuff")
		Goto LeftOverheadEnd
		
// P-P-P End
	LeftOverheadEnd:
		ML3F F 1
		TNT1 A 0 A_GiveInventory("MelPrimaryCombo", 1)
		TNT1 A 0 A_GiveInventory("ComboCoolDown", 1)
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 G 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 J 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 3
		Goto AfterMelee
	
// P-P-P-P
	ScorpionTailFinisher:
		TNT1 A 5 A_PlaySound("*strongmelee", CHAN_VOICE)
		TNT1 A 0 A_PlaySoundEX("strongmelee/miss", "SoundSlot5")
		ML4F ABC 1
		ML1F D 0 A_JumpIfInventory("PowerStrength",1,"ScorpionTailFinisherPowered")
		ML4F D 1 A_TSP_Melee(44,90,"UppercutMeleePuff",0,8,16,45,45)
		Goto ScorpionTailFinisherEnd
	ScorpionTailFinisherPowered:
		ML4F D 1 A_TSP_Melee(88,90,"UppercutMeleePuff",0,8,16,45,45)
		Goto ScorpionTailFinisherEnd
		
// P-P-P-P End
	ScorpionTailFinisherEnd:
		ML4F E 2
		ML4F DCBA 1
		TNT1 A 8
		Goto AfterMelee
		
//K-K-P
	KnifeHand:
		TNT1 A 0 A_PlaySoundEX("strongmelee/miss", "SoundSlot5")
		ML5F ABC 1 
		ML1F D 0 A_JumpIfInventory("PowerStrength",1,"KnifeHandPowered")
		ML5F D 1 A_TSP_Melee(28,70,"BasicMeleePuff")
		Goto KnifeHandEnd
	KnifeHandPowered:
		ML5F D 1 A_TSP_Melee(56,70,"BasicMeleePuff")
		Goto KnifeHandEnd
		
// K-K-P End
	KnifeHandEnd:
		ML5F EFG 1
		TNT1 A 0 A_GiveInventory("MelMachCombo", 1)
		TNT1 A 0 A_GiveInventory("ComboCoolDown", 1)
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		ML5F H 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		ML5F I 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 5
		Goto AfterMelee
	
//K-K-P-P
	CrossPunch:
		TNT1 A 2 A_PlaySound("*smallmelee", CHAN_VOICE)
		TNT1 A 0 A_PlaySoundEX("basicmelee/miss", "SoundSlot5")
		ML6F AB 1 
		ML1F D 0 A_JumpIfInventory("PowerStrength",1,"CrossPunchPowered")
		ML6F D 1 A_TSP_Melee(24,70,"BasicMeleePuff")
		Goto CrossPunchEnd
	CrossPunchPowered:
		ML6F D 1 A_TSP_Melee(48,70,"BasicMeleePuff")
		Goto CrossPunchEnd

	CrossPunchEnd:
		TNT1 A 0 A_TakeInventory("MelPrimaryCombo", 99)
		TNT1 A 0 A_GiveInventory("MelMachCombo", 1)
		TNT1 A 0 A_GiveInventory("ComboCoolDown", 1)
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		ML6F C 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		ML6F B 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		ML6F A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 3
		Goto AfterMelee
	
// K-K-P-P-P
	CrossDuo:
		TNT1 A 1
		TNT1 A 0 A_PlaySoundEX("basicmelee/miss", "SoundSlot5")
		ML7F AB 1 
		ML1F D 0 A_JumpIfInventory("PowerStrength",1,"CrossDuoPowered")
		ML7F D 1 A_TSP_Melee(24,70,"BasicMeleePuff")
		Goto CrossDuoEnd
	CrossDuoPowered:
		ML7F D 1 A_TSP_Melee(48,70,"BasicMeleePuff")
		Goto CrossDuoEnd
		
// K-K-P-P-P End
	CrossDuoEnd:
		TNT1 A 0 A_TakeInventory("MelPrimaryCombo", 99)
		TNT1 A 0 A_GiveInventory("MelMachCombo", 1)
		TNT1 A 0 A_GiveInventory("ComboCoolDown", 1)
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		ML7F C 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		ML7F B 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		ML7F A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 3
		Goto AfterMelee
		
//K-K-P-P-P-P
	RapidFireFinish:
		TNT1 A 1 A_PlaySound("*strongmelee", CHAN_VOICE)
		TNT1 A 0 A_PlaySoundEX("strongmelee/miss", "SoundSlot5")
		ML8F ABD 1 
		ML1F D 0 A_JumpIfInventory("PowerStrength",1,"RapidFireFinishPowered")
		ML8F E 5 A_TSP_Melee(32,90,"StrongMeleePuff")
		Goto RapidFireFinishEnd
	RapidFireFinishPowered:
		ML8F E 5 A_TSP_Melee(64,90,"StrongMeleePuff")
		Goto RapidFireFinishEnd

// K-K-P-P-P-P End
	RapidFireFinishEnd:
		ML8F DCBA 1
		TNT1 A 0 A_TakeInventory("MelPrimaryCombo", 99)
		TNT1 A 0 A_GiveInventory("MelMachCombo", 1)
		TNT1 A 0 A_GiveInventory("ComboCoolDown", 1)
		TNT1 AAAAAA 1 A_WeaponReady
		TNT1 A 0 A_TakeInventory("MelAlternateCombo", 99)
		TNT1 A 6
		Goto AfterMelee
		
// Kicks
	AltFire:
		TNT1 A 0 A_JumpIfInventory("MagSlingToken", 1,"MagSling")
		ML1F A 0 A_JumpIfInventory("MelAlternateCombo",4,"StingrayFinisher")	// P-P-P-K-K
		ML1F A 0 A_JumpIfInventory("MelAlternateCombo",2,"ViperFinisher")		// K-K-K
		ML1F A 0 A_JumpIfInventory("MelAlternateCombo",1,"UpperKick")			// K-K
		ML1F A 0 A_JumpIfInventory("MelPrimaryCombo",3,"AzureKnee")             // P-P-P-K
		ML1F A 0 A_JumpIfInventory("MelPrimaryCombo",2,"StreetSweeperFinisher") // P-P-K
		
// K DEFAULT
	DefaultKick:
		ML1F A 0 A_PlaySoundEX("basicmelee/miss", "SoundSlot5")
		MK4F ABC 1
		ML1F D 0 A_JumpIfInventory("PowerStrength",1,"DefaultKickPowered")
		MK4F D 1 A_TSP_Melee(24,90,"BasicMeleePuff")
		Goto DefaultKickEnd
	DefaultKickPowered:
		MK4F D 1 A_TSP_Melee(48,90,"BasicMeleePuff")
		Goto DefaultKickEnd
		
// K END
	DefaultKickEnd:
		MK4F E 1
		TNT1 A 0 A_GiveInventory("MelAlternateCombo", 1)
		TNT1 A 0 A_GiveInventory("ComboCoolDown", 1)
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		MK4F F 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		MK4F G 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		MK4F H 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		Goto AfterMelee
		
// K-K
	UpperKick:
		TNT1 A 3
		TNT1 A 0 A_PlaySoundEX("basicmelee/miss", "SoundSlot5")
		TNT1 A 0 A_PlaySound("*smallmelee", CHAN_VOICE)
		MK5F ABC 1
		ML1F D 0 A_JumpIfInventory("PowerStrength",1,"UpperKickPowered")
		MK5F D 2 A_TSP_Melee(24,90,"BasicMeleePuff")
		Goto UpperKickEnd
	UpperKickPowered:
		MK5F D 2 A_TSP_Melee(48,90,"BasicMeleePuff")
		Goto UpperKickEnd
		
// K-K END
	UpperKickEnd:
		MK5F E 1
		TNT1 A 0 A_GiveInventory("MelAlternateCombo", 1)
		TNT1 A 0 A_GiveInventory("ComboCoolDown", 1)
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		MK5F F 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 G 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 3
		Goto AfterMelee
		
// K-K-K
	ViperFinisher:
		TNT1 A 3 A_PlaySound("*strongmelee", CHAN_VOICE)
		TNT1 A 0 A_PlaySoundEX("strongmelee/miss", "SoundSlot5")
		MK6F AB 1
		ML1F D 0 A_JumpIfInventory("PowerStrength",1,"ViperFinisherPowered")
		MK6F C 2 A_TSP_Melee(48,90,"StrongMeleePuff",0,16,8)
		Goto ViperFinisherEnd
		
	ViperFinisherPowered:
		MK6F C 2 A_TSP_Melee(96,90,"StrongMeleePuff",0,16,8)
		Goto ViperFinisherEnd
	
// K-K-K END
	ViperFinisherEnd:
		MK6F DEF 1
		TNT1 A 6
		Goto AfterMelee
		
//P-P-K
	StreetSweeperFinisher:
		TNT1 A 4 A_PlaySound("*strongmelee", CHAN_VOICE)
		TNT1 A 0 A_PlaySoundEX("strongmelee/miss", "SoundSlot5")
		MK1F ABC 1
		ML1F D 0 A_JumpIfInventory("PowerStrength",1,"StreetSweeperFinisherPowered")
		MK1F D 1 A_TSP_Melee(48,90,"StrongMeleePuff")
		Goto StreetSweeperFinisherEnd
		
	StreetSweeperFinisherPowered:
		MK1F D 1 A_TSP_Melee(96,90,"StrongMeleePuff")
		Goto StreetSweeperFinisherEnd
		
// P-P-K End
	StreetSweeperFinisherEnd:
		MK1F EFGHI 1
		TNT1 A 5
		Goto AfterMelee
	
// P-P-P-K
	AzureKnee:
		TNT1 A 2
		TNT1 A 0 A_PlaySoundEX("basicmelee/miss", "SoundSlot5")
		MK2F ABC 1
		ML1F D 0 A_JumpIfInventory("PowerStrength",1,"AzureKneePowered")
		MK2F D 3 A_TSP_Melee(24,90,"StrongMeleePuff")
		Goto AzureKneeEnd
	AzureKneePowered:
		MK2F D 3 A_TSP_Melee(48,90,"StrongMeleePuff")
		Goto AzureKneeEnd
		
// P-P-P-K End
	AzureKneeEnd:
		MK2F CB 1
		TNT1 A 0 A_GiveInventory("MelAlternateCombo", 4)
		TNT1 A 0 A_GiveInventory("ComboCoolDown", 1)
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		MK2F A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("MeleePressed",1,"SPTraitStart")
		TNT1 A 1 A_WeaponReady
		TNT1 A 6
    Goto AfterMelee
	
//P-P-P-K-K
	StingRayFinisher:
		TNT1 A 3 A_PlaySound("*strongmelee", CHAN_VOICE)
		TNT1 A 0 A_PlaySoundEX("strongmelee/miss", "SoundSlot5")
		MK3F ABCD 1
		ML1F D 0 A_JumpIfInventory("PowerStrength",1,"StingRayFinisherPowered")
		MK3F E 1 A_TSP_Melee(48,90,"StrongMeleePuff")
		Goto StingRayFinisherEnd
	StingRayFinisherPowered:
		MK3F E 1 A_TSP_Melee(96,90,"StrongMeleePuff")
		Goto StingRayFinisherEnd
		
	StingRayFinisherEnd:
		MK3F FGHI 1
		//TNT1 A 0 A_GiveInventory("MelPistolCombo", 1)//allows you to do the pistol combo (we'll get to this later)
		TNT1 A 0 A_TakeInventory("MelPrimaryCombo", 99)
		TNT1 A 0 A_TakeInventory("MelAlternateCombo", 99)
		TNT1 A 0 A_TakeInventory("MelMachCombo", 99)
		TNT1 A 5
		Goto AfterMelee
		
	AfterMelee:
		TNT1 A 0 A_TakeInventory("MelPrimaryCombo", 99)
		TNT1 A 0 A_TakeInventory("MelAlternateCombo", 99)
		TNT1 A 0 A_TakeInventory("MelMachCombo", 99)
		TNT1 A 0 A_TakeInventory("MelPistolCombo", 99)
		TNT1 A 0 A_TakeInventory("MagSlingToken", 99)
		TNT1 A 0 A_TakeInventory("ChargedAttack", 99)
		TNT1 A 0 A_TakeInventory("ComboCoolDown", 99)
		MLED EDCBA 1
		MLEG A 1
		Goto Ready
	}
}