// DEFINITIONS
#include "Actors/DEC_DEFS.txt"

// Well this is decorative. :P

//Melee Button Press
Actor MeleePressed : Boolean {}
Actor TraitPressed : Boolean {}
Actor PlayingPickupSound : Boolean {}

Actor StartMelee : CustomInventory
{
  -INVBAR
  +UNDROPPABLE
  Inventory.Amount 1
  Inventory.MaxAmount 1
  States
  {
  Use:
    TNT1 A 0 A_GiveInventory("MeleePressed", 1)
    TNT1 A 0 A_GiveInventory("MakeHellFireBurst", 1)
    Fail
  }
}

Actor StopMelee : CustomInventory
{
  -INVBAR
  +UNDROPPABLE
  Inventory.Amount 1
  Inventory.MaxAmount 1
  States
  {
  Use:
    TNT1 A 0 A_TakeInventory("MeleePressed", 1)
    TNT1 A 0 A_TakeInventory("MakeHellFireBurst", 1)
    Fail
  }
}

Actor StartTrait : CustomInventory
{
  -INVBAR
  +UNDROPPABLE
  Inventory.Amount 1
  Inventory.MaxAmount 1
  States
  {
  Use:
    TNT1 A 0 A_GiveInventory("TraitPressed", 1)
    Fail
  }
}

Actor StopTrait : CustomInventory
{
  -INVBAR
  +UNDROPPABLE
  Inventory.Amount 1
  Inventory.MaxAmount 1
  States
  {
  Use:
    TNT1 A 0 A_TakeInventory("TraitPressed", 1)
    Fail
  }
}


// Weapon sprites are like such!
// 1111A0
// ^ Character (1 for Mel, 2 for Robo Mel)
//  ^ Slot
//   ^ Weapon
//    ^ Action

// Weapon Select Memory was adapted from mk-ww, by WildWeasel and Cardboard Marty
// This makes things less clustered for the select state on weapons

ACTOR WeaponSelectMemory : Inventory
{
  // Mel Weapons
  // 112 = Mel Nikana
  // 121 = Mel 919m
  // 131 = Mel Zeke Shotgun
  // 134 = Mel Dahlia Crossbow
  // 141 = Mel Ammobox50
  // 142 = Mel DGSS Assault Rifle
  // 149 = Mel MP40
  // 151 = Mel Toolbox
  // 171 = Mel WOG
  //
  // RoboMel Weapons
  // 221 = Robomel 917 Pistol
  Inventory.MaxAmount 999
}

Actor MeleeButtonActor : CustomInventory
{
  -INVBAR
  +UNDROPPABLE
  Inventory.Amount 1
  Inventory.MaxAmount 1
  States
  {
  Use:
    TNT1 A 0 A_JumpIfInventory("IsMel",1,"MelMeleeButton")
	TNT1 A 0 A_JumpIfInventory("IsRoboMel",1,"RoboMelMeleeButton")
    Fail
  MelMeleeButton:
    TNT1 A 0 A_JumpIfInventory("MeleeSelected",1,"MelMeleeSwitch")
    TNT1 A 0 A_SelectWeapon("MelMelee")
    Fail
  RoboMelMeleeButton:
    TNT1 A 0 A_JumpIfInventory("MeleeSelected",1,"MelMeleeSwitch")
    TNT1 A 0 A_SelectWeapon("RoboMelMelee")
    Fail
  MelMeleeSwitch:
    TNT1 A 0 A_JumpIfInventory("WeaponSelectMemory",221,"RoboMel917Switch")
    TNT1 A 0 A_JumpIfInventory("WeaponSelectMemory",171,"MelTestWeapon7Switch")
    TNT1 A 0 A_JumpIfInventory("WeaponSelectMemory",151,"MelToolBoxSwitch")
    TNT1 A 0 A_JumpIfInventory("WeaponSelectMemory",149,"MelMipFowtySwitch")
    TNT1 A 0 A_JumpIfInventory("WeaponSelectMemory",141,"MelAmmoBoxSwitch")
    TNT1 A 0 A_JumpIfInventory("WeaponSelectMemory",134,"MelDahliaSwitch")
    TNT1 A 0 A_JumpIfInventory("WeaponSelectMemory",131,"MelZekeSwitch")
    TNT1 A 0 A_JumpIfInventory("WeaponSelectMemory",121,"Mel919Switch")
    Goto Mel919Switch
  Mel919Switch:
    TNT1 A 0 A_SelectWeapon("Mel919mPistol")
    Fail
  RoboMel917Switch:
    TNT1 A 0 A_SelectWeapon("RoboMel917Pistol")
    Fail
  MelZekeSwitch:
    TNT1 A 0 A_SelectWeapon("MelZekeShotgun")
    Fail
  MelDahliaSwitch:
    TNT1 A 0 A_SelectWeapon("MelDahliaCrossbow")
    Fail
  MelAmmoBoxSwitch:
    TNT1 A 0 A_SelectWeapon("MelAmmoBox50")
    Fail
  MelToolBoxSwitch:
    TNT1 A 0 A_SelectWeapon("MelToolbox")
    Fail
  MelMipFowtySwitch:
    TNT1 A 0 A_SelectWeapon("MelMipFowty")
	Fail
  MelTestWeapon7Switch:
    TNT1 A 0 A_SelectWeapon("MelTestWeapon7")
    Fail
  }
}

Actor MeleeSelected : Boolean {}

//Characters
#include "Actors/Characters/DEC_LOAD.txt" //Character Loadout Stuff
#include "Actors/Characters/DEC_MEL.txt" // Mel's Player Stuff

//Enemies
#include "Actors/Enemies/DEC_H_DUMMY.txt" // Training Dummy

//Items
#include "Actors/DEC_ITEM.txt"

//Lone Survivor
#include "Actors/DEC_LSITEMS.txt" // Lone Survivor Specific Items

//The rest
#include "Actors/DEC_SFX.txt" //Special Effects (Casings, Smoke, Etc.)
#include "Actors/DEC_WEP_PICKUPS.txt" //Weapon pickups and such

///////////////////////////////////////////////////////
// Weapons
///////////////////////////////////////////////////////

#include "Actors/Weapons/DEC_W_PUNCH.txt" //Universal Melee Stuff
#include "Actors/Weapons/Mel/DEC_M_WEPBASE.txt" // Mel Base WEapon

////////////////////////////
//// SLOT 1 - Melee
////////////////////////////

// Starting Melee
#include "Actors/Weapons/Mel/DEC_M_WEP1a.txt" // MEL

////////////////////////////////////////////////////////
//// SLOT 2 - Starting Weapons/Pistols
////////////////////////////////////////////////////////

// Starting Weapons
// Mel's 919m.0 Pistol

///////////////////////////////////////////////////
//// SLOT 5 - Launchers/Explosives
///////////////////////////////////////////////////

// THE TOOLBOX
//#include "Actors/Weapons/Mel/DEC_M_WEP5a.txt" // MEL